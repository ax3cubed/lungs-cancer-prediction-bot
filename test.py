# -*- coding: utf-8 -*-
"""Lung cancer Logistic Regression

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1dzN5Cpmbnaf5Zut8-r972u5ed4l07JeJ
"""

# from google.colab import drive
# drive.mount('/My-Drive')

# Commented out IPython magic to ensure Python compatibility.
# %cd /My-Drive
import os
# os.listdir()

# os.chdir('/My-Drive/My Drive/Data/Project')
# os.listdir() #dir

#installing all packages
# !pip install numpy
# !pip install scipy
# !pip install sklearn
# !pip install pandas
# !pip install pickle-mixin
# !pip install matplotlib

# pip install pickle5

#importing all libraries
from sklearn import metrics
from sklearn.linear_model import LogisticRegression
import pandas as pd
from sklearn.model_selection import train_test_split
import pickle 
from matplotlib import pyplot

# Importing the dataset
dataset = pd.read_csv('Data.csv')
X = dataset.iloc[:, :-1].values
y = dataset.iloc[:, 23].values

# head
print(dataset.head(20))

# descriptions
print(dataset.describe())

# class distribution
print(dataset.groupby('Level').size())

# Splitting the dataset into the Training set and Test set
X_train, X_test, y_train, y_test = train_test_split(X, y, test_size = 0.2)

# Logistic Regression
logreg = LogisticRegression(max_iter=2000)
logreg.fit(X_train,y_train)

y_pred = logreg.predict(X_test)

# Making the Confusion Matrix
cnf_matrix = metrics.confusion_matrix(y_test, y_pred)
print(cnf_matrix)

# Show Accuracy
result = logreg.score(X_test, y_test)
print("Test score: {0:.2f} %".format(100 * result))

# Save Model to File
pickle.dump(logreg, open('LogReg.pk1', 'wb'))

# define input
# new_input = [[17, 1, 	3, 	1,	5,	3,	4,	2,	2,	2,	2,	4,	2,	3,	1,	3,	7, 8,	6,	2,	1,	7,	2]]
new_input = [[21,	9,	9,	9,	6,	9,	9,	9,	9,	9,	9,	9,	9,	2,	8,	9,	1,	2,	1,	4,	6,	7,	2]]
 
# get prediction for new input
new_output = logreg.predict(new_input)

print(new_input, new_output)

print(new_output)

Symptoms = ['age', 'gender', 'air_pollution', 'alcohol_use', 'dust_allergy', 'occupational_hazards', 'genetic_risk', 'wheezing', 'chronic_lung_disease', 'balanced_dietobesity', 'smoking', 'passive_smoker', 'chest_pain', 'coughing_of_blood', 'fatigue', 'weight_loss', 'shortness_of_breath', 'swallowing_difficulty', 'clubbing_of_finger_nails', 'frequent_cold', 'dry_cough', 'snoring']


question_prompts = [
     "What is your current age?",
     "What is your gender",
     "On a scale of 1-10 how exposed are you to air pollution",
     "On a scale of 1-10 how much do you take alcohol",
     "On a scale of 1-10 how would you grade your dust allergy levels",
     "On a scale of 1-10 how  exposed are you to occupational hazards",
     "On a scale of 1-10 how  exposed are you to genetic risk",
     "On a scale of 1-10 how  exposed are you wheezing",
     "On a scale of 1-10 have you been treated for chronic lung disease in the past",
     "On a scale of 1-10 how  exposed are you balanced dietobesity",
     "On a scale of 1-10 how much do you smoke",
     "On a scale of 1-10 how would you grade if your are a passive smoker",
     "On a scale of 1-10 how  would you grade if you have a chest pain",
     "On a scale of 1-10 how   would you grade if you have coughing of blood",
     "On a scale of 1-10 how  are you have fatigue",
     "On a scale of 1-10 how  exposed are you weight loss",
     "On a scale of 1-10 how  exposed are you shortness_of_breath",
     "On a scale of 1-10 how  exposed are you swallowing_difficulty",
     "On a scale of 1-10 how  exposed are you clubbing_of_finger_nails",
     "On a scale of 1-10 how  exposed are you frequent_cold",
     "On a scale of 1-10 how  exposed are you dry_cough",
     "On a scale of 1-10 how  exposed are you snoring",
]

patient_symptoms=[]